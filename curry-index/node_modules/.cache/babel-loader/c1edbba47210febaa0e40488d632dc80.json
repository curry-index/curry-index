{"ast":null,"code":"import _classCallCheck from\"/Users/gabbilaborwit/Desktop/curry-index/curry-index/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gabbilaborwit/Desktop/curry-index/curry-index/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/gabbilaborwit/Desktop/curry-index/curry-index/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/gabbilaborwit/Desktop/curry-index/curry-index/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gabbilaborwit/Desktop/curry-index/curry-index/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";// HOW TO USE MAPS API: https://dev.to/jessicabetts/how-to-use-google-maps-api-and-react-js-26c2\n// Modules\nimport React,{Component}from\"react\";import{Map,GoogleApiWrapper,Marker}from'google-maps-react';import Geocode from\"react-geocode\";import Image from'react-bootstrap/Image';import curryBowl from\"./currybowllg.svg\";import AddCurryModal from'./AddCurryModal';// CSS\nimport'./Map.css';import'bootstrap/dist/css/bootstrap.css';Geocode.setApiKey('AIzaSyAYZ0l37RYVyu6rfb-K6WEP1tbFrPfJmKM');var mapStyles={width:'80%',height:'330px',position:'relative'};function throwError(inputName){document.getElementById(inputName+\"-label\").style=\"color: #dc3545; font-weight: 600\";}// Store curry list in local storage\nfunction store(lizt){localStorage.setItem('curryList',JSON.stringify(lizt));}function loadCurryList(){var unparsedCurryList=localStorage.getItem('curryList');//Using && to condition on unparsedCurryList else null\nreturn unparsedCurryList&&JSON.parse(unparsedCurryList);}function loadMarkerInfo(){var markersList=[];if(!loaded_curryList){loaded_curryList=[];}var _loop=function _loop(i){var curry=loaded_curryList[i];Geocode.fromAddress(curry.restaurantAddress).then(function(response){var _response$results$0$g=response.results[0].geometry.location,lat=_response$results$0$g.lat,lng=_response$results$0$g.lng;//   console.log(\"address: \", curry.restaurantAddress, \" \", lat, lng);\nmarkersList.push({latitude:lat,longitude:lng,name:curry.restaurantName});},function(error){console.error(\"No location found for restaurant \",loaded_curryList[i].restaurantName,\" at \",loaded_curryList[i].restaurantAddress,\"\\nTechnical error for this to follow (just ignore):\\n\",error);});};for(var i=0;i<loaded_curryList.length;i++){_loop(i);}return markersList;}// Globals\nvar loaded_curryList=loadCurryList();var loaded_markerInfo=loadMarkerInfo();var MapContainer=/*#__PURE__*/function(_Component){_inherits(MapContainer,_Component);var _super=_createSuper(MapContainer);function MapContainer(props){var _this;_classCallCheck(this,MapContainer);_this=_super.call(this,props);_this.displayMarkers=function(){return _this.state.restaurants.map(function(rest,index){return/*#__PURE__*/_jsx(Marker,{id:index,position:{lat:rest.latitude,lng:rest.longitude},icon:{url:\"http://maps.google.com/mapfiles/kml/pal2/icon41.png\"},onClick:function onClick(){return _this.markerClicked(rest,index);}},rest.name+\"_\"+index);});};_this.addItem=function(e){e.preventDefault();// Error checker: make sure all input values are filled (except excluded inputs if any)\nvar excludedInputs=\"tastingNotes\";var error=false;// Go through each input field and make sure it's not empty\nfor(var i=0;i<5;i++){if(e.target[i].value===\"\"&&!excludedInputs.includes(e.target[i].name)){throwError(e.target[i].name);error=true;}else if(document.getElementById(e.target[i].name+\"-label\").style.color!==\"#212529\"){document.getElementById(e.target[i].name+\"-label\").style.color=\"#212529\";document.getElementById(e.target[i].name+\"-label\").style.fontWeight=\"400\";}}if(error===true){document.getElementsByClassName(\"req\")[0].style.color=\"#dc3545\";return null;}var currCurryList=_this.state.curryList;var newCurry={};for(i=0;i<5;i++){// If optional inputs empty, fill with \"None\"\nif(excludedInputs.includes(e.target[i].name)&&e.target[i].value===\"\"){e.target[i].value=\"N/A\";}newCurry[e.target.elements[i].name]=e.target[i].value;}if(_this.state.pictures.length===0){newCurry[\"pic\"]=curryBowl;}else{newCurry[\"pic\"]=_this.state.pictures;}currCurryList.push(newCurry);_this.setState({curryList:currCurryList});store(currCurryList);// close modal\n_this.setModalShow(false);window.location.reload();};_this.state={curryList:loaded_curryList||[],restaurants:loaded_markerInfo||[],markerSelected:false,modalShow:false,pictures:[]};_this.onDrop=_this.onDrop.bind(_assertThisInitialized(_this));return _this;}_createClass(MapContainer,[{key:\"onDrop\",value:function onDrop(pictureFiles,pictureDataURLs){this.setState({pictures:pictureDataURLs});}},{key:\"markerClicked\",value:function markerClicked(restInfo,index){this.setState({markerSelected:true});// open infowindow.open(map, marker);\ndocument.getElementById(\"instrucs\").innerHTML=\"Selected restaurant: \";// Set restaurant name\nfor(var i=0;i<document.getElementsByClassName(\"rest-name\").length;i++){document.getElementsByClassName(\"rest-name\")[i].innerHTML=restInfo.name;}// Set curry type\ndocument.getElementById(\"curry-img\").src=this.state.curryList[index].pic;document.getElementById(\"ranking\").innerHTML=\"#\"+(index+1);document.getElementById(\"curry-type\").innerHTML=this.state.curryList[index].curryType;document.getElementById(\"taste-notes\").innerHTML=this.state.curryList[index].tastingNotes;document.getElementById(\"rate\").innerHTML=this.state.curryList[index].curryRating;}},{key:\"setModalShow\",value:function setModalShow(bool){// on open, reset picture stored for upload so no repeats if someone doesn't upload one\nif(bool===true){this.setState({pictures:[]});}this.setState({modalShow:bool});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"bootstrap-overrides\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"selected-restaurant\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"instrucs\",children:\"Select a Pinned Thai Curry Restaurant\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"rest-name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"link-like-span\",onClick:function onClick(){return _this2.setModalShow(true);},children:\"+ Add New Curry\"})]}),/*#__PURE__*/_jsx(AddCurryModal,{show:this.state.modalShow,onHide:function onHide(){return _this2.setModalShow(false);},currySetter:this.addItem,onDrop:this.onDrop}),/*#__PURE__*/_jsx(\"div\",{id:\"map-box\",children:/*#__PURE__*/_jsx(Map,{google:this.props.google,zoom:13,style:mapStyles,initialCenter:{lat:40.4476,lng:-79.9809},children:this.displayMarkers()})}),/*#__PURE__*/_jsx(\"div\",{id:\"notice\",children:\"Note: if map doesn't update or show markers and curries in index, refresh page\"}),this.state.markerSelected&&/*#__PURE__*/_jsxs(\"div\",{id:\"selected-curry\",className:\"mt-2 mt-md-2\",children:[/*#__PURE__*/_jsx(Image,{alt:\"curry\",src:curryBowl,id:\"curry-img\",className:\"selected-curry-image left-fl mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"left-fl\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"left-fl\",children:/*#__PURE__*/_jsx(\"span\",{id:\"ranking\",children:\"#1\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"left-fl ml-1 mt-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"rest-name mb-0\",children:\"n\"}),/*#__PURE__*/_jsx(\"h3\",{id:\"curry-type\",children:\"Type\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"clear\",children:[\"Taste notes: \",/*#__PURE__*/_jsx(\"span\",{id:\"taste-notes\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Rating: \",/*#__PURE__*/_jsx(\"span\",{id:\"rate\"}),\"/5\"]})]})]})]});}}]);return MapContainer;}(Component);export default GoogleApiWrapper({apiKey:'AIzaSyAYZ0l37RYVyu6rfb-K6WEP1tbFrPfJmKM'})(MapContainer);","map":{"version":3,"sources":["/Users/gabbilaborwit/Desktop/curry-index/curry-index/src/Map.js"],"names":["React","Component","Map","GoogleApiWrapper","Marker","Geocode","Image","AddCurryModal","setApiKey","mapStyles","width","height","position","throwError","inputName","document","getElementById","style","store","lizt","localStorage","setItem","JSON","stringify","loadCurryList","unparsedCurryList","getItem","parse","loadMarkerInfo","markersList","loaded_curryList","i","curry","fromAddress","restaurantAddress","then","response","results","geometry","location","lat","lng","push","latitude","longitude","name","restaurantName","error","console","length","loaded_markerInfo","MapContainer","props","displayMarkers","state","restaurants","map","rest","index","url","markerClicked","addItem","e","preventDefault","excludedInputs","target","value","includes","color","fontWeight","getElementsByClassName","currCurryList","curryList","newCurry","elements","pictures","curryBowl","setState","setModalShow","window","reload","markerSelected","modalShow","onDrop","bind","pictureFiles","pictureDataURLs","restInfo","innerHTML","src","pic","curryType","tastingNotes","curryRating","bool","google","apiKey"],"mappings":"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","sourcesContent":["// HOW TO USE MAPS API: https://dev.to/jessicabetts/how-to-use-google-maps-api-and-react-js-26c2\n\n// Modules\nimport React, { Component } from \"react\";\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react';\nimport Geocode from \"react-geocode\";\nimport Image from 'react-bootstrap/Image';\nimport curryBowl from './currybowllg.svg';\nimport AddCurryModal from './AddCurryModal';\n\n// CSS\nimport './Map.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nGeocode.setApiKey('AIzaSyAYZ0l37RYVyu6rfb-K6WEP1tbFrPfJmKM');\n\nconst mapStyles = {\n    width: '80%',\n    height: '330px',\n    position: 'relative'\n};\n\nfunction throwError(inputName) {\n    document.getElementById(inputName + \"-label\").style = \"color: #dc3545; font-weight: 600\";\n}\n\n// Store curry list in local storage\nfunction store(lizt) {\n    localStorage.setItem('curryList', JSON.stringify(lizt))\n}\n\nfunction loadCurryList() {\n    let unparsedCurryList = localStorage.getItem('curryList')\n    //Using && to condition on unparsedCurryList else null\n    return (unparsedCurryList && JSON.parse(unparsedCurryList))\n}\n\nfunction loadMarkerInfo() {\n    let markersList = [];\n    if (!loaded_curryList) {\n        loaded_curryList = []\n    }\n    for (let i = 0; i < loaded_curryList.length; i++) {\n        let curry = loaded_curryList[i];\n\n        Geocode.fromAddress(curry.restaurantAddress).then(\n            response => {\n                const { lat, lng } = response.results[0].geometry.location;\n                //   console.log(\"address: \", curry.restaurantAddress, \" \", lat, lng);\n                markersList.push(\n                    { latitude: lat, longitude: lng, name: curry.restaurantName }\n                );\n            },\n            error => {\n                \n                console.error(\"No location found for restaurant \", loaded_curryList[i].restaurantName, \" at \", loaded_curryList[i].restaurantAddress, \"\\nTechnical error for this to follow (just ignore):\\n\", error);\n            }\n        );\n    }\n    return markersList;\n}\n\n// Globals\nlet loaded_curryList = loadCurryList();\nlet loaded_markerInfo = loadMarkerInfo();\n\nclass MapContainer extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            curryList: loaded_curryList || [],\n            restaurants: loaded_markerInfo || [],\n            markerSelected: false,\n            modalShow: false,\n            pictures: []\n        }\n        this.onDrop = this.onDrop.bind(this);\n    }\n\n    onDrop(pictureFiles, pictureDataURLs) {\n        this.setState({\n            pictures: pictureDataURLs\n        });\n    }\n\n    displayMarkers = () => {\n        return this.state.restaurants.map((rest, index) => {\n            return <Marker\n                    key={rest.name + \"_\" + index}\n                    id={index}\n                    position={{\n                        lat: rest.latitude,\n                        lng: rest.longitude\n                    }}\n                    icon = {{url: \"http://maps.google.com/mapfiles/kml/pal2/icon41.png\"}}\n                    onClick={() => this.markerClicked(rest, index)} />\n        })\n    }\n\n    markerClicked(restInfo, index) {\n        this.setState({ markerSelected: true });\n\n        // open infowindow.open(map, marker);\n        document.getElementById(\"instrucs\").innerHTML = \"Selected restaurant: \";\n\n        // Set restaurant name\n        for (var i = 0; i < document.getElementsByClassName(\"rest-name\").length; i++) {\n            document.getElementsByClassName(\"rest-name\")[i].innerHTML = restInfo.name;\n        }\n        \n        // Set curry type\n        document.getElementById(\"curry-img\").src = this.state.curryList[index].pic;\n\n        document.getElementById(\"ranking\").innerHTML = \"#\" + (index + 1);\n\n        document.getElementById(\"curry-type\").innerHTML = this.state.curryList[index].curryType;\n\n        document.getElementById(\"taste-notes\").innerHTML = this.state.curryList[index].tastingNotes;\n\n        document.getElementById(\"rate\").innerHTML = this.state.curryList[index].curryRating;\n    }\n\n    setModalShow(bool) {\n        // on open, reset picture stored for upload so no repeats if someone doesn't upload one\n        if(bool === true){\n            this.setState({\n                pictures:[]\n            })\n        }\n        this.setState({ modalShow: bool });\n    }\n\n    addItem = (e) => {\n        e.preventDefault();\n        // Error checker: make sure all input values are filled (except excluded inputs if any)\n        let excludedInputs = \"tastingNotes\";\n        let error = false;\n        // Go through each input field and make sure it's not empty\n        for (var i = 0; i < 5; i++) {\n            if (e.target[i].value === \"\" && !excludedInputs.includes(e.target[i].name)) {\n                throwError(e.target[i].name);\n                error = true;\n            }\n            else if (document.getElementById(e.target[i].name + \"-label\").style.color !== \"#212529\") {\n                document.getElementById(e.target[i].name + \"-label\").style.color = \"#212529\";\n                document.getElementById(e.target[i].name + \"-label\").style.fontWeight = \"400\"\n            }\n        }\n        if (error === true) {\n            document.getElementsByClassName(\"req\")[0].style.color = \"#dc3545\";\n            return null\n        }\n\n        let currCurryList = this.state.curryList;\n\n        let newCurry = {};\n        for (i = 0; i < 5; i++) {\n            // If optional inputs empty, fill with \"None\"\n            if (excludedInputs.includes(e.target[i].name) && e.target[i].value === \"\") {\n                e.target[i].value = \"N/A\"\n            }\n\n            newCurry[e.target.elements[i].name] = e.target[i].value;\n        }\n        if(this.state.pictures.length === 0){\n            newCurry[\"pic\"] = curryBowl\n        }\n        else{\n            newCurry[\"pic\"] = this.state.pictures;\n        }\n\n        currCurryList.push(newCurry);\n        this.setState({ curryList: currCurryList });\n        store(currCurryList);\n\n        // close modal\n        this.setModalShow(false);\n\n        window.location.reload()\n    }\n\n    render() {\n        return (\n            <div id=\"bootstrap-overrides\">\n                <div id=\"selected-restaurant\">\n                    <span id=\"instrucs\">Select a Pinned Thai Curry Restaurant</span> <span className='rest-name'></span>\n                    <br />\n                    <span className=\"link-like-span\" onClick={() => this.setModalShow(true)}>\n                        + Add New Curry\n                    </span>\n                </div>\n\n                <AddCurryModal\n                    show={this.state.modalShow}\n                    onHide={() => this.setModalShow(false)}\n                    currySetter={this.addItem}\n                    onDrop ={this.onDrop}\n                />\n\n                <div id=\"map-box\">\n                    <Map\n                        google={this.props.google}\n                        zoom={13}\n                        style={mapStyles}\n                        initialCenter={{ lat: 40.4476, lng: -79.9809 }}\n                    >\n                        {this.displayMarkers()}\n                    </Map>\n                </div>\n\n                <div id=\"notice\">Note: if map doesn't update or show markers and curries in index, refresh page</div>\n\n                { this.state.markerSelected &&\n                    <div id=\"selected-curry\" className=\"mt-2 mt-md-2\">\n                        <Image alt=\"curry\" src={curryBowl} id=\"curry-img\" className=\"selected-curry-image left-fl mr-4\" />\n                        <div className=\"left-fl\">\n                            <span className=\"left-fl\">\n                                <span id=\"ranking\">#1</span>\n                            </span>\n\n                            <span className=\"left-fl ml-1 mt-3\">\n                                <h2 className=\"rest-name mb-0\">n</h2>\n                                <h3 id=\"curry-type\">Type</h3>\n                            </span>\n\n                            <div className=\"clear\">\n                                Taste notes: <span id=\"taste-notes\"></span>\n                                <br />\n                                Rating: <span id=\"rate\"></span>/5\n                            </div>\n                        </div>\n                    </div>\n                }\n\n            </div>\n        )\n    }\n}\n\nexport default GoogleApiWrapper({ apiKey: 'AIzaSyAYZ0l37RYVyu6rfb-K6WEP1tbFrPfJmKM' })(MapContainer);"]},"metadata":{},"sourceType":"module"}